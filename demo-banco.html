<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Landing System — Demo Banco Nacional Meridian</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
/* ===================================================================
   DESIGN TOKENS
   =================================================================== */
:root {
  /* Brand colors */
  --primary: #2563eb;
  --primary-light: #3b82f6;
  --primary-dark: #1d4ed8;
  --primary-50: rgba(37, 99, 235, .06);
  --primary-100: rgba(37, 99, 235, .12);
  --accent: #7c3aed;
  --success: #10b981;
  --success-50: rgba(16, 185, 129, .08);
  --warning: #f59e0b;
  --warning-50: rgba(245, 158, 11, .08);
  --danger: #ef4444;
  --danger-50: rgba(239, 68, 68, .08);

  /* Neutral palette */
  --sidebar: #0f172a;
  --bg: #f1f5f9;
  --card: #ffffff;
  --text: #1e293b;
  --text-secondary: #475569;
  --muted: #64748b;
  --border: #e2e8f0;
  --border-light: #f1f5f9;

  /* Bank brand */
  --bank-dark: #0C2340;
  --bank-navy: #1a3a5c;
  --bank-gold: #C5A572;
  --bank-gold-light: #d4ba8a;
  --bank-light: #F5F0E8;

  /* Elevation */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, .04);
  --shadow-sm: 0 1px 3px rgba(0, 0, 0, .06), 0 1px 2px rgba(0, 0, 0, .04);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, .07), 0 2px 4px -2px rgba(0, 0, 0, .05);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, .08), 0 4px 6px -4px rgba(0, 0, 0, .04);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, .08), 0 8px 10px -6px rgba(0, 0, 0, .04);
  --shadow-glow: 0 0 40px rgba(37, 99, 235, .12);

  /* Radius */
  --radius-sm: 8px;
  --radius: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;

  /* Transitions */
  --ease: cubic-bezier(.4, 0, .2, 1);
  --ease-spring: cubic-bezier(.34, 1.56, .64, 1);
  --duration: .25s;
  --duration-slow: .5s;
}

/* ===================================================================
   RESET & BASE
   =================================================================== */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--text);
  overflow: hidden;
  height: 100vh;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

::selection { background: rgba(37, 99, 235, .15); }
:focus-visible { outline: 2px solid var(--primary); outline-offset: 2px; }
input, select, button { font-family: inherit; }

/* ===================================================================
   VIEW SYSTEM
   =================================================================== */
.view {
  position: absolute;
  inset: 0;
  display: none;
  opacity: 0;
  transition: opacity var(--duration-slow) var(--ease);
}
.view.active { display: flex; opacity: 1; }

/* ===================================================================
   LOADING OVERLAY
   =================================================================== */
#loading-overlay {
  position: fixed;
  inset: 0;
  background: var(--bank-dark);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  transition: opacity .6s var(--ease);
}
#loading-overlay.hidden { opacity: 0; pointer-events: none; }
.loader-ring {
  width: 48px;
  height: 48px;
  border: 3px solid rgba(197, 165, 114, .15);
  border-top-color: var(--bank-gold);
  border-radius: 50%;
  animation: spin .9s linear infinite;
}
.loader-text {
  color: var(--bank-gold);
  font-size: 12px;
  font-weight: 500;
  margin-top: 16px;
  letter-spacing: 2px;
  text-transform: uppercase;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* ===================================================================
   TOAST NOTIFICATIONS
   =================================================================== */
#toast-container {
  position: fixed;
  top: 16px;
  right: 16px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 8px;
  pointer-events: none;
}
.toast {
  pointer-events: auto;
  background: var(--card);
  border-radius: var(--radius);
  padding: 12px 18px;
  box-shadow: var(--shadow-xl);
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 13px;
  font-weight: 500;
  transform: translateX(calc(100% + 20px));
  transition: transform .4s var(--ease-spring), opacity .3s var(--ease);
  border-left: 3px solid var(--success);
  max-width: 340px;
  backdrop-filter: blur(8px);
}
.toast.show { transform: translateX(0); }
.toast.removing { opacity: 0; transform: translateX(calc(100% + 20px)); }
.toast-icon { font-size: 18px; flex-shrink: 0; }
.toast-body { flex: 1; }
.toast-title { font-weight: 600; font-size: 13px; }
.toast-message { font-size: 11px; color: var(--muted); margin-top: 1px; }

/* ===================================================================
   LOGIN
   =================================================================== */
#login {
  background: var(--bank-dark);
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
}
#login::before {
  content: '';
  position: absolute;
  width: 600px;
  height: 600px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(197, 165, 114, .08), transparent 70%);
  top: -200px;
  right: -100px;
}
#login::after {
  content: '';
  position: absolute;
  width: 400px;
  height: 400px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(37, 99, 235, .06), transparent 70%);
  bottom: -100px;
  left: -100px;
}
.login-box {
  background: var(--card);
  border-radius: var(--radius-xl);
  padding: 48px 40px;
  width: 400px;
  box-shadow: var(--shadow-xl), 0 0 80px rgba(0, 0, 0, .3);
  text-align: center;
  position: relative;
  z-index: 1;
  animation: loginSlide .6s var(--ease-spring);
}
@keyframes loginSlide {
  from { opacity: 0; transform: translateY(20px) scale(.98); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}
.login-box .brand { font-size: 44px; margin-bottom: 12px; }
.login-box h1 {
  font-size: 24px;
  font-weight: 800;
  margin-bottom: 4px;
  color: var(--text);
  letter-spacing: -.02em;
}
.login-box .subtitle { color: var(--muted); font-size: 14px; margin-bottom: 28px; }
.form-group { text-align: left; margin-bottom: 14px; }
.form-group label {
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  display: block;
  margin-bottom: 5px;
  text-transform: uppercase;
  letter-spacing: .5px;
}
.form-group input {
  width: 100%;
  padding: 11px 14px;
  border: 1.5px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 14px;
  transition: all var(--duration) var(--ease);
  background: var(--bg);
}
.form-group input:focus {
  outline: none;
  border-color: var(--primary);
  background: var(--card);
  box-shadow: 0 0 0 3px var(--primary-50);
}
.btn-login {
  width: 100%;
  padding: 12px;
  background: var(--primary);
  color: #fff;
  border: none;
  border-radius: var(--radius-sm);
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all var(--duration) var(--ease);
  margin-top: 8px;
  position: relative;
  overflow: hidden;
}
.btn-login:hover { background: var(--primary-dark); transform: translateY(-1px); box-shadow: var(--shadow-md); }
.btn-login:active { transform: translateY(0); }
.login-footer { margin-top: 20px; font-size: 11px; color: var(--muted); }

/* ===================================================================
   APP LAYOUT
   =================================================================== */
.app-layout { flex: 1; display: flex; height: 100vh; }

/* Sidebar */
.sidebar {
  width: 240px;
  background: var(--sidebar);
  color: #fff;
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  border-right: 1px solid rgba(255, 255, 255, .04);
}
.sidebar-brand {
  padding: 18px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, .06);
  display: flex;
  align-items: center;
  gap: 10px;
}
.sidebar-brand .brand-icon { font-size: 24px; }
.sidebar-brand .brand-text { font-size: 14px; font-weight: 700; line-height: 1.2; }
.sidebar-brand .brand-sub { font-size: 10px; color: var(--muted); font-weight: 400; }
.sidebar-nav { flex: 1; padding: 10px 8px; overflow-y: auto; }
.nav-section-label {
  font-size: 10px;
  font-weight: 600;
  color: #475569;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 12px 14px 6px;
}
.nav-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 14px;
  border-radius: var(--radius-sm);
  font-size: 13px;
  font-weight: 500;
  color: #94a3b8;
  cursor: pointer;
  transition: all .15s var(--ease);
  margin-bottom: 1px;
  position: relative;
}
.nav-item:hover { background: rgba(255, 255, 255, .05); color: #e2e8f0; }
.nav-item.active {
  background: var(--primary-100);
  color: var(--primary-light);
}
.nav-item.active::before {
  content: '';
  position: absolute;
  left: 0;
  top: 6px;
  bottom: 6px;
  width: 3px;
  border-radius: 0 3px 3px 0;
  background: var(--primary-light);
}
.nav-item .icon { width: 20px; text-align: center; font-size: 14px; }
.nav-item .nav-badge {
  margin-left: auto;
  background: var(--danger);
  color: #fff;
  font-size: 9px;
  font-weight: 700;
  padding: 1px 6px;
  border-radius: 10px;
  min-width: 18px;
  text-align: center;
}
.sidebar-footer {
  padding: 16px 20px;
  border-top: 1px solid rgba(255, 255, 255, .06);
  font-size: 11px;
  color: #475569;
}

/* Main area */
.main-area { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
.topbar {
  height: 56px;
  background: var(--card);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  flex-shrink: 0;
}
.topbar-left { display: flex; align-items: center; gap: 16px; }
.topbar-left h2 { font-size: 16px; font-weight: 700; letter-spacing: -.01em; }
.topbar-breadcrumb { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--muted); }
.topbar-breadcrumb .sep { opacity: .4; }
.topbar-right { display: flex; align-items: center; gap: 14px; }
.topbar-search {
  display: flex;
  align-items: center;
  gap: 6px;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 6px 12px;
  font-size: 12px;
  color: var(--muted);
  cursor: pointer;
  transition: all var(--duration) var(--ease);
}
.topbar-search:hover { border-color: var(--primary); }
.topbar-search kbd {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 1px 5px;
  font-size: 10px;
  font-family: inherit;
}
.notification-bell {
  position: relative;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: background var(--duration) var(--ease);
  font-size: 16px;
}
.notification-bell:hover { background: var(--bg); }
.notification-bell .badge-dot {
  position: absolute;
  top: 4px;
  right: 5px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--danger);
  border: 2px solid var(--card);
}
.avatar {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--accent));
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  cursor: pointer;
  transition: box-shadow var(--duration) var(--ease);
}
.avatar:hover { box-shadow: 0 0 0 2px var(--card), 0 0 0 4px var(--primary-100); }
.content { flex: 1; overflow-y: auto; padding: 24px; }
.content::-webkit-scrollbar { width: 6px; }
.content::-webkit-scrollbar-track { background: transparent; }
.content::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.content::-webkit-scrollbar-thumb:hover { background: #cbd5e1; }

/* ===================================================================
   STAT CARDS
   =================================================================== */
.stat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
.stat-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  transition: all var(--duration) var(--ease);
  position: relative;
  overflow: hidden;
}
.stat-card:hover { box-shadow: var(--shadow-md); transform: translateY(-1px); }
.stat-card .icon-bg {
  position: absolute;
  top: -8px;
  right: -8px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  opacity: .06;
  font-size: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
}
.stat-card .label { font-size: 12px; color: var(--muted); font-weight: 500; }
.stat-card .value {
  font-size: 28px;
  font-weight: 800;
  margin-top: 4px;
  letter-spacing: -.02em;
}
.stat-card .change { font-size: 11px; margin-top: 6px; font-weight: 600; display: flex; align-items: center; gap: 4px; }
.stat-card .change.up { color: var(--success); }
.stat-card .change.down { color: var(--danger); }

/* ===================================================================
   LANDING CARDS
   =================================================================== */
.landing-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
.landing-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  overflow: hidden;
  cursor: pointer;
  transition: all var(--duration) var(--ease);
}
.landing-card:hover { box-shadow: var(--shadow-lg); transform: translateY(-3px); border-color: transparent; }
.landing-thumb {
  height: 140px;
  position: relative;
  overflow: hidden;
}
.landing-thumb::after {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, transparent 40%, rgba(0, 0, 0, .3));
}
.landing-thumb .badge {
  position: absolute;
  top: 10px;
  right: 10px;
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  z-index: 1;
  backdrop-filter: blur(8px);
  letter-spacing: .5px;
}
.badge-published { background: rgba(16, 185, 129, .2); color: #34d399; }
.badge-draft { background: rgba(245, 158, 11, .2); color: #fbbf24; }
.landing-info { padding: 16px; }
.landing-info h3 { font-size: 15px; font-weight: 700; margin-bottom: 3px; }
.landing-info .slug {
  font-size: 11px;
  color: var(--muted);
  font-family: 'SF Mono', Menlo, monospace;
  background: var(--bg);
  padding: 2px 6px;
  border-radius: 4px;
  display: inline-block;
}
.landing-meta {
  display: flex;
  gap: 16px;
  margin-top: 10px;
  font-size: 12px;
  color: var(--muted);
}
.landing-meta strong { color: var(--text); }
.landing-actions { display: flex; gap: 8px; margin-top: 12px; }

/* ===================================================================
   BUTTONS
   =================================================================== */
.btn-sm {
  padding: 7px 16px;
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-weight: 600;
  border: 1px solid var(--border);
  background: var(--card);
  cursor: pointer;
  font-family: inherit;
  transition: all .15s var(--ease);
}
.btn-sm:hover { border-color: var(--primary); color: var(--primary); background: var(--primary-50); }
.btn-sm.primary {
  background: var(--primary);
  color: #fff;
  border-color: var(--primary);
}
.btn-sm.primary:hover { background: var(--primary-dark); border-color: var(--primary-dark); box-shadow: var(--shadow-sm); }

/* ===================================================================
   ACTIVITY
   =================================================================== */
.activity-list {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
}
.activity-list h3 { font-size: 14px; font-weight: 700; margin-bottom: 14px; }
.activity-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 0;
  border-bottom: 1px solid var(--border-light);
  font-size: 13px;
  transition: background var(--duration) var(--ease);
}
.activity-item:last-child { border: none; }
.activity-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
  box-shadow: 0 0 0 3px rgba(0, 0, 0, .04);
}
.activity-time { margin-left: auto; font-size: 11px; color: var(--muted); white-space: nowrap; }

/* ===================================================================
   CHART
   =================================================================== */
.chart-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
}
.chart-card h3 { font-size: 14px; font-weight: 700; margin-bottom: 14px; }
.mini-chart {
  display: flex;
  align-items: flex-end;
  gap: 6px;
  height: 80px;
  margin-top: 12px;
}
.mini-chart .bar {
  flex: 1;
  border-radius: 6px 6px 0 0;
  transition: height .8s var(--ease-spring);
  cursor: pointer;
  position: relative;
}
.mini-chart .bar:hover { filter: brightness(1.1); }
.mini-chart .bar::after {
  content: attr(data-value);
  position: absolute;
  top: -18px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 9px;
  font-weight: 700;
  color: var(--muted);
  opacity: 0;
  transition: opacity .2s;
}
.mini-chart .bar:hover::after { opacity: 1; }
.chart-labels {
  display: flex;
  justify-content: space-between;
  font-size: 10px;
  color: var(--muted);
  margin-top: 8px;
}

/* ===================================================================
   EDITOR
   =================================================================== */
.editor-view { flex-direction: column !important; }
.editor-toolbar {
  height: 48px;
  background: var(--card);
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 16px;
  flex-shrink: 0;
}
.editor-toolbar .left { display: flex; align-items: center; gap: 12px; }
.editor-toolbar .center { display: flex; gap: 4px; align-items: center; }
.editor-toolbar .right { display: flex; gap: 6px; }
.editor-name {
  font-size: 13px;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 8px;
}
.unsaved-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: var(--warning);
  animation: pulse 2s infinite;
}
@keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .4; } }

.tb-btn {
  padding: 6px 14px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
  border: 1px solid var(--border);
  background: var(--card);
  cursor: pointer;
  font-family: inherit;
  transition: all .15s var(--ease);
}
.tb-btn:hover { border-color: var(--primary); color: var(--primary); }
.tb-btn.active { background: var(--primary); color: #fff; border-color: var(--primary); }
.tb-btn.accent {
  background: linear-gradient(135deg, #7c3aed, #a855f7);
  color: #fff;
  border-color: transparent;
}
.tb-btn.accent:hover { filter: brightness(1.1); }
.tb-btn.publish { background: var(--success); color: #fff; border-color: var(--success); }
.tb-btn.publish:hover { filter: brightness(1.1); }
.tb-divider { width: 1px; height: 20px; background: var(--border); margin: 0 4px; }

.editor-body { flex: 1; display: flex; overflow: hidden; }

/* Editor palette */
.editor-palette {
  width: 210px;
  background: var(--card);
  border-right: 1px solid var(--border);
  padding: 12px;
  overflow-y: auto;
  flex-shrink: 0;
}
.palette-title {
  font-size: 10px;
  font-weight: 700;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 8px;
  padding: 0 4px;
}
.palette-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  border-radius: var(--radius-sm);
  font-size: 12px;
  color: var(--text-secondary);
  cursor: grab;
  transition: all .15s var(--ease);
  margin-bottom: 1px;
}
.palette-item:hover { background: var(--bg); color: var(--text); }
.palette-item:active { cursor: grabbing; }
.palette-item .grip { color: #cbd5e1; font-size: 10px; }
.layer-item {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 11px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: all .15s var(--ease);
  margin-bottom: 1px;
}
.layer-item:hover { background: var(--bg); }
.layer-item.active-layer { background: var(--primary-50); color: var(--primary); font-weight: 600; }

/* Editor canvas */
.editor-canvas {
  flex: 1;
  background: var(--bg);
  overflow-y: auto;
  display: flex;
  justify-content: center;
  padding: 24px;
}
.canvas-frame {
  background: var(--card);
  width: 100%;
  max-width: 800px;
  box-shadow: var(--shadow-lg);
  border-radius: var(--radius);
  overflow: hidden;
}
.canvas-section {
  position: relative;
  cursor: pointer;
  transition: all .15s var(--ease);
}
.canvas-section::after {
  content: attr(data-label);
  position: absolute;
  top: 4px;
  left: 4px;
  background: var(--primary);
  color: #fff;
  font-size: 9px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 4px;
  opacity: 0;
  transition: opacity .15s;
  pointer-events: none;
  z-index: 2;
}
.canvas-section:hover { outline: 2px dashed #93c5fd; outline-offset: -2px; }
.canvas-section:hover::after { opacity: 1; }
.canvas-section.selected { outline: 2px solid var(--primary); outline-offset: -2px; }
.canvas-section.selected::after { opacity: 1; }

/* Editor properties */
.editor-props {
  width: 270px;
  background: var(--card);
  border-left: 1px solid var(--border);
  padding: 16px;
  overflow-y: auto;
  flex-shrink: 0;
}
.props-title {
  font-size: 10px;
  font-weight: 700;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 12px;
}
.props-section-name { font-size: 14px; font-weight: 700; color: var(--primary); margin-bottom: 16px; }
.prop-group { margin-bottom: 12px; }
.prop-label { font-size: 11px; font-weight: 600; color: var(--muted); margin-bottom: 4px; }
.prop-input {
  width: 100%;
  padding: 8px 10px;
  border: 1.5px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 12px;
  font-family: inherit;
  transition: all var(--duration) var(--ease);
  background: var(--bg);
}
.prop-input:focus { outline: none; border-color: var(--primary); background: var(--card); box-shadow: 0 0 0 3px var(--primary-50); }
.prop-color { display: flex; align-items: center; gap: 8px; }
.prop-color input[type=color] {
  width: 34px;
  height: 34px;
  border: 1.5px solid var(--border);
  border-radius: var(--radius-sm);
  cursor: pointer;
  padding: 2px;
}

/* ===================================================================
   BANK LANDING CANVAS STYLES
   =================================================================== */
.bank-nav {
  background: var(--bank-dark);
  color: #fff;
  padding: 12px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.bank-nav .logo { display: flex; align-items: center; gap: 8px; font-weight: 700; font-size: 14px; }
.bank-nav .menu { display: flex; gap: 16px; font-size: 11px; color: rgba(255, 255, 255, .7); }
.bank-hero {
  background: linear-gradient(135deg, var(--bank-dark) 0%, var(--bank-navy) 50%, var(--bank-dark) 100%);
  color: #fff;
  padding: 48px 40px;
  text-align: center;
  position: relative;
  overflow: hidden;
}
.bank-hero::before {
  content: '';
  position: absolute;
  top: -50%;
  right: -20%;
  width: 500px;
  height: 500px;
  border-radius: 50%;
  background: rgba(197, 165, 114, .08);
}
.bank-hero h1 { font-size: 28px; font-weight: 800; margin-bottom: 8px; position: relative; letter-spacing: -.02em; }
.bank-hero .rate { font-size: 18px; color: var(--bank-gold); font-weight: 700; margin-bottom: 16px; position: relative; }
.bank-hero .cta-btn {
  display: inline-block;
  background: var(--bank-gold);
  color: var(--bank-dark);
  padding: 12px 32px;
  border-radius: var(--radius-sm);
  font-weight: 700;
  font-size: 14px;
  position: relative;
  transition: all var(--duration) var(--ease);
}
.bank-stats {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  background: var(--card);
  border-bottom: 1px solid var(--border);
}
.bank-stat {
  text-align: center;
  padding: 20px;
  border-right: 1px solid var(--border);
}
.bank-stat:last-child { border: none; }
.bank-stat .num { font-size: 22px; font-weight: 800; color: var(--bank-dark); letter-spacing: -.02em; }
.bank-stat .lbl { font-size: 11px; color: var(--muted); margin-top: 2px; }
.bank-features { padding: 32px 40px; background: var(--card); }
.bank-features h2 { text-align: center; font-size: 20px; margin-bottom: 24px; color: var(--bank-dark); }
.feat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; }
.feat-item { text-align: center; padding: 16px; }
.feat-item .feat-icon {
  width: 44px;
  height: 44px;
  border-radius: var(--radius);
  background: var(--bank-light);
  color: var(--bank-gold);
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto 10px;
  font-size: 20px;
}
.feat-item h4 { font-size: 12px; font-weight: 700; color: var(--bank-dark); margin-bottom: 2px; }
.feat-item p { font-size: 10px; color: var(--muted); }
.bank-testimonials { padding: 32px 40px; background: var(--bg); }
.bank-testimonials h2 { text-align: center; font-size: 20px; margin-bottom: 24px; color: var(--bank-dark); }
.test-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; }
.test-card {
  background: var(--card);
  border-radius: var(--radius);
  padding: 16px;
  border: 1px solid var(--border);
}
.test-card blockquote { font-size: 12px; color: var(--muted); font-style: italic; line-height: 1.6; margin-bottom: 10px; }
.test-card .author { font-size: 11px; font-weight: 700; color: var(--text); }
.test-card .role { font-size: 10px; color: var(--muted); }
.bank-faq { padding: 32px 40px; background: var(--card); }
.bank-faq h2 { text-align: center; font-size: 20px; margin-bottom: 24px; color: var(--bank-dark); }
.faq-item { border-bottom: 1px solid var(--border); padding: 12px 0; }
.faq-item h4 { font-size: 13px; font-weight: 700; color: var(--bank-dark); margin-bottom: 4px; }
.faq-item p { font-size: 12px; color: var(--muted); line-height: 1.6; }
.bank-form { padding: 32px 40px; background: var(--bank-light); }
.bank-form h2 { text-align: center; font-size: 20px; margin-bottom: 24px; color: var(--bank-dark); }
.form-fields { max-width: 400px; margin: 0 auto; }
.form-fields input, .form-fields select {
  width: 100%;
  padding: 10px 14px;
  border: 1.5px solid #d1d5db;
  border-radius: var(--radius-sm);
  font-size: 13px;
  margin-bottom: 10px;
  font-family: inherit;
  transition: border var(--duration) var(--ease);
}
.form-fields input:focus, .form-fields select:focus { outline: none; border-color: var(--bank-gold); }
.form-fields .submit-btn {
  width: 100%;
  padding: 12px;
  background: var(--bank-gold);
  color: var(--bank-dark);
  border: none;
  border-radius: var(--radius-sm);
  font-weight: 700;
  font-size: 14px;
  cursor: pointer;
  transition: all var(--duration) var(--ease);
}
.form-fields .submit-btn:hover { background: var(--bank-gold-light); }
.bank-footer {
  background: var(--bank-dark);
  color: rgba(255, 255, 255, .6);
  padding: 24px 40px;
  font-size: 11px;
  display: flex;
  justify-content: space-between;
}

/* ===================================================================
   PREVIEW
   =================================================================== */
#preview { flex-direction: column; background: var(--card); overflow-y: auto; }
.preview-bar {
  height: 44px;
  background: var(--sidebar);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 20px;
  flex-shrink: 0;
}
.preview-bar .btn-back {
  background: rgba(255, 255, 255, .08);
  border: 1px solid rgba(255, 255, 255, .1);
  color: #fff;
  padding: 6px 14px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  font-family: inherit;
  transition: background var(--duration) var(--ease);
}
.preview-bar .btn-back:hover { background: rgba(255, 255, 255, .15); }
.preview-bar .url-badge {
  background: rgba(255, 255, 255, .06);
  border: 1px solid rgba(255, 255, 255, .1);
  border-radius: 6px;
  padding: 4px 12px;
  font-size: 12px;
  font-family: 'SF Mono', Menlo, monospace;
  color: rgba(255, 255, 255, .6);
}
.preview-content { flex: 1; overflow-y: auto; }

/* Popup overlay */
.preview-popup {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, .5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity .3s var(--ease);
  backdrop-filter: blur(4px);
}
.preview-popup.show { opacity: 1; pointer-events: auto; }
.popup-box {
  background: var(--card);
  border-radius: var(--radius-xl);
  padding: 36px;
  max-width: 400px;
  text-align: center;
  box-shadow: var(--shadow-xl);
  position: relative;
  animation: popupBounce .4s var(--ease-spring);
}
@keyframes popupBounce {
  from { opacity: 0; transform: scale(.9) translateY(10px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}
.popup-box h3 { font-size: 20px; font-weight: 800; color: var(--bank-dark); margin-bottom: 8px; }
.popup-box p { color: var(--muted); font-size: 14px; margin-bottom: 16px; line-height: 1.5; }
.popup-box .popup-cta {
  display: inline-block;
  background: var(--bank-gold);
  color: var(--bank-dark);
  padding: 10px 28px;
  border-radius: var(--radius-sm);
  font-weight: 700;
  font-size: 14px;
  transition: all var(--duration) var(--ease);
}
.popup-box .popup-cta:hover { background: var(--bank-gold-light); }
.popup-box .close-popup {
  position: absolute;
  top: 12px;
  right: 14px;
  font-size: 22px;
  color: #9ca3af;
  cursor: pointer;
  background: none;
  border: none;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all var(--duration) var(--ease);
}
.popup-box .close-popup:hover { background: var(--bg); color: var(--text); }
.popup-meta { font-size: 10px; color: var(--muted); margin-top: 12px; }

/* ===================================================================
   LEADS TABLE
   =================================================================== */
.leads-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: var(--card);
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid var(--border);
}
.leads-table th {
  padding: 12px 16px;
  text-align: left;
  font-size: 11px;
  font-weight: 600;
  color: var(--muted);
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  text-transform: uppercase;
  letter-spacing: .5px;
}
.leads-table td {
  padding: 11px 16px;
  font-size: 13px;
  border-bottom: 1px solid var(--border-light);
  transition: background var(--duration) var(--ease);
}
.leads-table tr:last-child td { border: none; }
.leads-table tr:hover td { background: var(--primary-50); }
.lead-badge {
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 10px;
  font-weight: 700;
  letter-spacing: .3px;
}
.lead-nuevo { background: var(--primary-100); color: var(--primary); }
.lead-contactado { background: var(--warning-50); color: var(--warning); }
.lead-cualificado { background: rgba(124, 58, 237, .1); color: var(--accent); }
.lead-convertido { background: var(--success-50); color: var(--success); }

/* ===================================================================
   A/B TESTING
   =================================================================== */
.ab-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  padding: 24px;
  margin-bottom: 16px;
}
.ab-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
.ab-header h3 { font-size: 18px; font-weight: 700; letter-spacing: -.01em; }
.status-badge {
  padding: 4px 14px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
  letter-spacing: .3px;
}
.ab-variants { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 20px; }
.ab-variant {
  border: 1.5px solid var(--border);
  border-radius: var(--radius);
  padding: 18px;
  transition: all var(--duration) var(--ease);
}
.ab-variant.winner { border-color: var(--success); background: var(--success-50); }
.ab-variant h4 { font-size: 14px; font-weight: 700; margin-bottom: 8px; display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
.ab-variant .metric {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  padding: 6px 0;
  border-bottom: 1px solid var(--border-light);
}
.ab-variant .metric:last-child { border: none; }
.ab-variant .metric .val { font-weight: 700; }
.bar-compare {
  height: 32px;
  display: flex;
  border-radius: var(--radius-sm);
  overflow: hidden;
  margin-bottom: 8px;
}
.bar-compare .bar-a { background: var(--primary); transition: width .8s var(--ease); }
.bar-compare .bar-b { background: var(--success); transition: width .8s var(--ease); }
.lift-badge {
  display: inline-block;
  background: var(--success-50);
  color: var(--success);
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
}
.control-badge {
  display: inline-block;
  background: var(--primary-100);
  color: var(--primary);
  padding: 2px 8px;
  border-radius: 4px;
  font-size: 10px;
  font-weight: 700;
}

/* ===================================================================
   HEATMAP
   =================================================================== */
.heatmap-container {
  position: relative;
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid var(--border);
}
.heatmap-dot {
  position: absolute;
  border-radius: 50%;
  pointer-events: none;
  animation: hpulse 2.5s ease-in-out infinite;
}
@keyframes hpulse {
  0%, 100% { opacity: .6; transform: scale(1); }
  50% { opacity: .9; transform: scale(1.15); }
}
.scroll-depth {
  display: flex;
  height: 400px;
  border-radius: var(--radius);
  overflow: hidden;
  border: 1px solid var(--border);
}
.scroll-band {
  flex: 1;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  color: #fff;
  padding-bottom: 10px;
  transition: filter var(--duration) var(--ease);
}
.scroll-band:hover { filter: brightness(1.1); }

/* ===================================================================
   ACCESSIBILITY
   =================================================================== */
.a11y-score-ring {
  width: 130px;
  height: 130px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 38px;
  font-weight: 900;
  margin: 0 auto 16px;
  position: relative;
  letter-spacing: -.02em;
}
.a11y-score-ring::before {
  content: '';
  position: absolute;
  inset: 4px;
  border-radius: 50%;
  border: 3px solid currentColor;
  opacity: .15;
}
.a11y-issue {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 14px;
  border-bottom: 1px solid var(--border-light);
  transition: background var(--duration) var(--ease);
}
.a11y-issue:last-child { border: none; }
.a11y-issue:hover { background: var(--primary-50); border-radius: var(--radius-sm); }
.issue-badge {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 700;
  color: #fff;
  flex-shrink: 0;
}
.fix-suggestion {
  font-size: 11px;
  color: var(--primary);
  background: var(--primary-50);
  padding: 4px 10px;
  border-radius: 6px;
  margin-top: 6px;
  display: inline-block;
}
.passed-rules { font-size: 12px; color: var(--muted); line-height: 2; }
.passed-rules .check { color: var(--success); font-weight: 600; }

/* ===================================================================
   SECTION HEADER
   =================================================================== */
.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}
.section-header h2 { font-size: 20px; font-weight: 700; letter-spacing: -.01em; }
.section-header .count-badge {
  background: var(--primary-100);
  color: var(--primary);
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 700;
  margin-left: 8px;
}

/* ===================================================================
   ANIMATIONS
   =================================================================== */
.fade-in { animation: fadeIn .4s var(--ease) forwards; }
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(8px); }
  to { opacity: 1; transform: translateY(0); }
}
.stagger-1 { animation-delay: .05s; }
.stagger-2 { animation-delay: .1s; }
.stagger-3 { animation-delay: .15s; }
.stagger-4 { animation-delay: .2s; }
</style>
</head>
<body>

<!-- Loading overlay -->
<div id="loading-overlay" class="hidden">
  <div class="loader-ring"></div>
  <div class="loader-text">Cargando</div>
</div>

<!-- Toast container -->
<div id="toast-container"></div>

<!-- ===== LOGIN ===== -->
<div id="login" class="view active">
  <div class="login-box">
    <div class="brand">&#127974;</div>
    <h1>Landing System</h1>
    <p class="subtitle">Plataforma de landing pages profesionales</p>
    <div class="form-group">
      <label>Email</label>
      <input type="email" value="admin@meridian.bank" id="login-email">
    </div>
    <div class="form-group">
      <label>Contraseña</label>
      <input type="password" value="12345678" id="login-pass">
    </div>
    <button class="btn-login" onclick="handleLogin()">Iniciar sesión</button>
    <p class="login-footer">Demo interactiva — Banco Nacional Meridian</p>
  </div>
</div>

<!-- ===== APP ===== -->
<div id="app" class="view">
  <div class="app-layout">
    <div class="sidebar">
      <div class="sidebar-brand">
        <span class="brand-icon">&#127974;</span>
        <div>
          <span class="brand-text">Banco Meridian</span><br>
          <span class="brand-sub">Landing System</span>
        </div>
      </div>
      <div class="sidebar-nav">
        <div class="nav-section-label">Principal</div>
        <div class="nav-item active" data-view="home">
          <span class="icon">&#127968;</span> Inicio
        </div>
        <div class="nav-item" data-view="landings">
          <span class="icon">&#128196;</span> Landings
        </div>
        <div class="nav-item" data-view="leads">
          <span class="icon">&#128203;</span> Leads
          <span class="nav-badge">23</span>
        </div>
        <div class="nav-section-label">Optimización</div>
        <div class="nav-item" data-view="abtesting">
          <span class="icon">&#129514;</span> A/B Testing
        </div>
        <div class="nav-item" data-view="heatmaps">
          <span class="icon">&#128293;</span> Heatmaps
        </div>
        <div class="nav-item" data-view="accessibility">
          <span class="icon">&#9855;</span> Accesibilidad
        </div>
        <div class="nav-section-label">Sistema</div>
        <div class="nav-item" data-view="settings">
          <span class="icon">&#9881;</span> Configuración
        </div>
      </div>
      <div class="sidebar-footer">Landing System v2.0 &mdash; &copy; 2026</div>
    </div>

    <div class="main-area">
      <div class="topbar">
        <div class="topbar-left">
          <h2 id="page-title">Inicio</h2>
        </div>
        <div class="topbar-right">
          <div class="topbar-search">
            &#128269; Buscar...
            <kbd>&#8984;K</kbd>
          </div>
          <div class="notification-bell">
            &#128276;
            <span class="badge-dot"></span>
          </div>
          <span style="font-size:13px;color:var(--text-secondary);font-weight:500">Carlos Martínez</span>
          <div class="avatar">CM</div>
        </div>
      </div>
      <div class="content" id="main-content"></div>
    </div>
  </div>
</div>

<!-- ===== EDITOR ===== -->
<div id="editor" class="view editor-view">
  <div class="editor-toolbar">
    <div class="left">
      <button class="tb-btn" onclick="showView('landings')">&#8592; Volver</button>
      <div class="editor-name">
        Hipoteca Joven Meridian
        <span class="unsaved-dot" title="Cambios sin guardar"></span>
      </div>
    </div>
    <div class="center">
      <button class="tb-btn active">&#128421; Escritorio</button>
      <button class="tb-btn">&#128241; Tablet</button>
      <button class="tb-btn">&#128242; Móvil</button>
      <span class="tb-divider"></span>
      <button class="tb-btn active">Props</button>
      <button class="tb-btn accent">&#10024; Asistente IA</button>
    </div>
    <div class="right">
      <button class="tb-btn" onclick="showPreview()">&#128065; Vista previa</button>
      <button class="tb-btn" onclick="handleSave()">&#128190; Guardar</button>
      <button class="tb-btn publish" onclick="handlePublish()">&#128640; Publicar</button>
    </div>
  </div>
  <div class="editor-body">
    <div class="editor-palette">
      <div class="palette-title">Componentes</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#9733; Navegación</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#10024; Hero</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#128200; Estadísticas</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#9638; Características</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#10003; Testimonios</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#63; FAQ</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#9993; Formulario</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#128640; CTA</div>
      <div class="palette-item"><span class="grip">&#8942;&#8942;</span> &#127910; Pie de página</div>
      <div class="palette-title" style="margin-top:16px">Capas</div>
      <div class="layer-item active-layer" onclick="selectSection('nav')">1. Navegación</div>
      <div class="layer-item" onclick="selectSection('hero')">2. Hero</div>
      <div class="layer-item" onclick="selectSection('stats')">3. Estadísticas</div>
      <div class="layer-item" onclick="selectSection('features')">4. Características</div>
      <div class="layer-item" onclick="selectSection('testimonials')">5. Testimonios</div>
      <div class="layer-item" onclick="selectSection('faq')">6. FAQ</div>
      <div class="layer-item" onclick="selectSection('form')">7. Formulario</div>
      <div class="layer-item" onclick="selectSection('footer')">8. Pie de página</div>
    </div>
    <div class="editor-canvas">
      <div class="canvas-frame" id="editor-canvas-frame"></div>
    </div>
    <div class="editor-props" id="editor-props">
      <div class="props-title">Propiedades</div>
      <div class="props-section-name" id="props-name">Selecciona una sección</div>
      <div id="props-content">
        <p style="font-size:12px;color:var(--muted);line-height:1.6">
          Haz clic en una sección del canvas o en la lista de capas para editar sus propiedades.
        </p>
      </div>
    </div>
  </div>
</div>

<!-- ===== PREVIEW ===== -->
<div id="preview" class="view">
  <div class="preview-bar">
    <button class="btn-back" onclick="showView('editor-return')">&#8592; Volver al editor</button>
    <div class="url-badge">&#128274; meridian.bank/p/hipoteca-joven</div>
    <span style="font-size:12px;color:rgba(255,255,255,.5)">Responsive: Escritorio</span>
  </div>
  <div class="preview-content" id="preview-content"></div>
  <div class="preview-popup" id="preview-popup">
    <div class="popup-box">
      <button class="close-popup" onclick="closePopup()">&times;</button>
      <div style="font-size:44px;margin-bottom:12px">&#127873;</div>
      <h3>¡Oferta exclusiva!</h3>
      <p>Solicita tu hipoteca antes del 31 de marzo y obtén <strong>0% comisión de apertura</strong></p>
      <div class="popup-cta">Solicitar ahora</div>
      <div class="popup-meta">Trigger: temporizador 3s &bull; Frecuencia: una vez por sesión</div>
    </div>
  </div>
</div>

<script>
// =====================================================================
// STATE & CONSTANTS
// =====================================================================
const VIEWS = document.querySelectorAll('.view');
const NAV_ITEMS = document.querySelectorAll('.nav-item');
let currentView = 'home';

// =====================================================================
// TOAST SYSTEM
// =====================================================================
function toast(title, message, type = 'success') {
  const container = document.getElementById('toast-container');
  const el = document.createElement('div');
  el.className = 'toast';
  if (type === 'warning') el.style.borderLeftColor = 'var(--warning)';
  if (type === 'info') el.style.borderLeftColor = 'var(--primary)';

  const icons = { success: '&#10004;', warning: '&#9888;', info: '&#8505;' };
  el.innerHTML = `
    <span class="toast-icon">${icons[type] || icons.success}</span>
    <div class="toast-body">
      <div class="toast-title">${title}</div>
      ${message ? `<div class="toast-message">${message}</div>` : ''}
    </div>`;

  container.appendChild(el);
  requestAnimationFrame(() => requestAnimationFrame(() => el.classList.add('show')));

  setTimeout(() => {
    el.classList.add('removing');
    el.classList.remove('show');
    setTimeout(() => el.remove(), 400);
  }, 3500);
}

// =====================================================================
// LOADING OVERLAY
// =====================================================================
function showLoading() {
  const overlay = document.getElementById('loading-overlay');
  overlay.classList.remove('hidden');
  overlay.style.display = 'flex';
}

function hideLoading() {
  const overlay = document.getElementById('loading-overlay');
  overlay.classList.add('hidden');
  setTimeout(() => { overlay.style.display = 'none'; }, 600);
}

// =====================================================================
// VIEW MANAGEMENT
// =====================================================================
function switchToView(viewId) {
  VIEWS.forEach(v => v.classList.remove('active'));
  document.getElementById(viewId).classList.add('active');
}

function handleLogin() {
  showLoading();
  setTimeout(() => {
    switchToView('app');
    renderView('home');
    hideLoading();
    setTimeout(() => toast('Bienvenido, Carlos', 'Sesión iniciada correctamente'), 400);
  }, 1200);
}

function showView(view) {
  if (view === 'editor-return') {
    switchToView('editor');
    return;
  }
  if (view === 'editor') {
    switchToView('editor');
    renderEditorCanvas();
    return;
  }
  if (view === 'preview') {
    switchToView('preview');
    return;
  }
  currentView = view;
  switchToView('app');
  NAV_ITEMS.forEach(n => n.classList.toggle('active', n.dataset.view === view));
  renderView(view);
}

function showPreview() {
  switchToView('preview');
  renderPreview();
  setTimeout(() => document.getElementById('preview-popup').classList.add('show'), 3000);
}

function closePopup() {
  document.getElementById('preview-popup').classList.remove('show');
}

function handleSave() {
  toast('Landing guardada', 'Los cambios se han guardado correctamente');
}

function handlePublish() {
  toast('Landing publicada', 'Hipoteca Joven Meridian está online', 'info');
}

NAV_ITEMS.forEach(n => n.addEventListener('click', () => showView(n.dataset.view)));

// =====================================================================
// RENDER VIEWS
// =====================================================================
const TITLES = {
  home: 'Inicio',
  landings: 'Landings',
  abtesting: 'A/B Testing',
  leads: 'Leads',
  heatmaps: 'Heatmaps',
  accessibility: 'Accesibilidad',
  settings: 'Configuración',
};

const RENDERERS = {
  home: homeHTML,
  landings: landingsHTML,
  abtesting: abHTML,
  leads: leadsHTML,
  heatmaps: heatmapsHTML,
  accessibility: a11yHTML,
  settings: settingsHTML,
};

function renderView(view) {
  document.getElementById('page-title').textContent = TITLES[view] || view;
  const renderer = RENDERERS[view];
  document.getElementById('main-content').innerHTML = renderer ? renderer() : '';
}

// =====================================================================
// HOME
// =====================================================================
function homeHTML() {
  return `<div class="fade-in">
<div class="stat-grid">
  <div class="stat-card">
    <div class="icon-bg" style="color:var(--primary)">&#128196;</div>
    <div class="label">Landings activas</div>
    <div class="value">4</div>
    <div class="change up">&#9650; 1 esta semana</div>
  </div>
  <div class="stat-card">
    <div class="icon-bg" style="color:var(--primary)">&#128065;</div>
    <div class="label">Visitantes hoy</div>
    <div class="value" style="color:var(--primary)">2.847</div>
    <div class="change up">&#9650; 12,3% vs ayer</div>
  </div>
  <div class="stat-card">
    <div class="icon-bg" style="color:var(--success)">&#128203;</div>
    <div class="label">Leads este mes</div>
    <div class="value" style="color:var(--success)">156</div>
    <div class="change up">&#9650; 23 nuevos hoy</div>
  </div>
  <div class="stat-card">
    <div class="icon-bg" style="color:var(--accent)">&#128200;</div>
    <div class="label">Tasa conversión</div>
    <div class="value" style="color:var(--accent)">5,48%</div>
    <div class="change up">&#9650; 0,3% vs mes anterior</div>
  </div>
</div>
<div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
  <div class="activity-list">
    <h3>Actividad reciente</h3>
    <div class="activity-item">
      <div class="activity-dot" style="background:var(--success)"></div>
      <span>Nuevo lead: <strong>María García</strong> — Hipoteca Joven</span>
      <span class="activity-time">Hace 12 min</span>
    </div>
    <div class="activity-item">
      <div class="activity-dot" style="background:var(--primary)"></div>
      <span>Landing <strong>Black Friday</strong> publicada</span>
      <span class="activity-time">Hace 1h</span>
    </div>
    <div class="activity-item">
      <div class="activity-dot" style="background:var(--accent)"></div>
      <span>A/B Test <strong>Hero Test</strong> — Variante B gana +56%</span>
      <span class="activity-time">Hace 3h</span>
    </div>
    <div class="activity-item">
      <div class="activity-dot" style="background:var(--warning)"></div>
      <span>Audit accesibilidad: <strong>92/100</strong></span>
      <span class="activity-time">Hace 5h</span>
    </div>
    <div class="activity-item">
      <div class="activity-dot" style="background:var(--success)"></div>
      <span>Nuevo lead: <strong>Carlos Ruiz</strong> — Tarjeta Platinum</span>
      <span class="activity-time">Hace 6h</span>
    </div>
  </div>
  <div class="chart-card">
    <h3>Visitantes por día (última semana)</h3>
    <div class="mini-chart">
      <div class="bar" style="height:45%;background:var(--primary)" data-value="1.2k"></div>
      <div class="bar" style="height:62%;background:var(--primary)" data-value="1.8k"></div>
      <div class="bar" style="height:38%;background:var(--primary)" data-value="1.0k"></div>
      <div class="bar" style="height:72%;background:var(--primary)" data-value="2.1k"></div>
      <div class="bar" style="height:55%;background:var(--primary)" data-value="1.5k"></div>
      <div class="bar" style="height:88%;background:var(--primary)" data-value="2.6k"></div>
      <div class="bar" style="height:95%;background:linear-gradient(180deg,var(--primary-light),var(--primary))" data-value="2.8k"></div>
    </div>
    <div class="chart-labels">
      <span>Lun</span><span>Mar</span><span>Mié</span><span>Jue</span><span>Vie</span><span>Sáb</span>
      <span style="font-weight:700;color:var(--primary)">Hoy</span>
    </div>
  </div>
</div>
</div>`;
}

// =====================================================================
// LANDINGS
// =====================================================================
function landingsHTML() {
  return `<div class="fade-in">
<div class="section-header">
  <h2>Mis Landings <span class="count-badge">4</span></h2>
  <button class="btn-sm primary">+ Nueva Landing</button>
</div>
<div class="landing-grid">
  <div class="landing-card" onclick="showView('editor')">
    <div class="landing-thumb" style="background:linear-gradient(135deg,#0C2340,#1a3a5c)">
      <div class="badge badge-published">Publicada</div>
      <div style="color:#fff;padding:20px;font-size:16px;font-weight:700;position:relative;z-index:1">
        Hipoteca Joven<br>
        <span style="font-size:11px;font-weight:400;opacity:.7">Tu primera vivienda con la mejor hipoteca</span>
      </div>
    </div>
    <div class="landing-info">
      <h3>Hipoteca Joven Meridian</h3>
      <div class="slug">/p/hipoteca-joven</div>
      <div class="landing-meta">
        <span>&#128065; <strong>1.234</strong> visitas</span>
        <span>&#128203; <strong>67</strong> leads</span>
        <span>&#128200; <strong>5,4%</strong> conv.</span>
      </div>
      <div class="landing-actions">
        <button class="btn-sm primary" onclick="event.stopPropagation();showView('editor')">Editar</button>
        <button class="btn-sm" onclick="event.stopPropagation();showPreview()">Vista previa</button>
        <button class="btn-sm">Estadísticas</button>
      </div>
    </div>
  </div>
  <div class="landing-card">
    <div class="landing-thumb" style="background:linear-gradient(135deg,#1a1a2e,#C5A572)">
      <div class="badge badge-published">Publicada</div>
      <div style="color:#fff;padding:20px;font-size:16px;font-weight:700">
        Tarjeta Platinum<br>
        <span style="font-size:11px;font-weight:400;opacity:.7">Business sin límites</span>
      </div>
    </div>
    <div class="landing-info">
      <h3>Tarjeta Platinum Business</h3>
      <div class="slug">/p/tarjeta-platinum</div>
      <div class="landing-meta">
        <span>&#128065; <strong>892</strong> visitas</span>
        <span>&#128203; <strong>45</strong> leads</span>
        <span>&#128200; <strong>5,0%</strong> conv.</span>
      </div>
      <div class="landing-actions">
        <button class="btn-sm primary">Editar</button>
        <button class="btn-sm">Vista previa</button>
      </div>
    </div>
  </div>
  <div class="landing-card">
    <div class="landing-thumb" style="background:linear-gradient(135deg,#0C2340,#2563eb)">
      <div class="badge badge-draft">Borrador</div>
      <div style="color:#fff;padding:20px;font-size:16px;font-weight:700">
        Cuenta Empresas<br>
        <span style="font-size:11px;font-weight:400;opacity:.7">Pro para PYMEs</span>
      </div>
    </div>
    <div class="landing-info">
      <h3>Cuenta Empresas Pro</h3>
      <div class="slug">/p/cuenta-empresas</div>
      <div class="landing-meta"><span style="color:var(--warning)">&#9888; En edición</span></div>
      <div class="landing-actions"><button class="btn-sm primary">Editar</button></div>
    </div>
  </div>
  <div class="landing-card">
    <div class="landing-thumb" style="background:linear-gradient(135deg,#1f2937,#ef4444)">
      <div class="badge badge-published">Publicada</div>
      <div style="color:#fff;padding:20px;font-size:16px;font-weight:700">
        Black Friday<br>
        <span style="font-size:11px;font-weight:400;opacity:.7">Ofertas especiales</span>
      </div>
    </div>
    <div class="landing-info">
      <h3>Campaña Black Friday</h3>
      <div class="slug">/p/black-friday-2026</div>
      <div class="landing-meta">
        <span>&#128065; <strong>2.103</strong> visitas</span>
        <span>&#129514; <strong>A/B Test activo</strong></span>
      </div>
      <div class="landing-actions">
        <button class="btn-sm primary">Editar</button>
        <button class="btn-sm">Vista previa</button>
      </div>
    </div>
  </div>
</div>
</div>`;
}

// =====================================================================
// A/B TESTING
// =====================================================================
function abHTML() {
  return `<div class="fade-in">
<div class="section-header"><h2>Experimentos A/B</h2></div>
<div class="ab-card">
  <div class="ab-header">
    <div>
      <h3>Hipoteca Joven — Hero Test</h3>
      <span style="font-size:12px;color:var(--muted)">Creado: 10 Feb 2026 &bull; Duración: 8 días</span>
    </div>
    <span class="status-badge" style="background:var(--success-50);color:var(--success)">ACTIVO</span>
  </div>
  <div class="stat-grid" style="margin-bottom:20px">
    <div class="stat-card" style="padding:16px">
      <div class="label">Visitantes</div>
      <div class="value" style="font-size:22px">2.103</div>
    </div>
    <div class="stat-card" style="padding:16px">
      <div class="label">Conversiones</div>
      <div class="value" style="font-size:22px;color:var(--success)">146</div>
    </div>
    <div class="stat-card" style="padding:16px">
      <div class="label">Tasa conv. media</div>
      <div class="value" style="font-size:22px">6,94%</div>
    </div>
    <div class="stat-card" style="padding:16px">
      <div class="label">Ganadora</div>
      <div class="value" style="font-size:22px;color:var(--success)">Var. B</div>
    </div>
  </div>
  <div class="ab-variants">
    <div class="ab-variant">
      <h4>Variante A <span class="control-badge">Control</span></h4>
      <p style="font-size:12px;color:var(--muted);margin-bottom:12px;font-style:italic">
        "Tu primera vivienda con la mejor hipoteca del mercado"
      </p>
      <div class="metric"><span>Tráfico</span><span class="val">50%</span></div>
      <div class="metric"><span>Visitantes</span><span class="val">1.052</span></div>
      <div class="metric"><span>Conversiones</span><span class="val">57</span></div>
      <div class="metric"><span>Tasa conv.</span><span class="val">5,42%</span></div>
      <div class="metric"><span>Lift</span><span class="val" style="color:var(--muted)">Base</span></div>
    </div>
    <div class="ab-variant winner">
      <h4>Variante B <span class="lift-badge">&#9650; Ganadora</span></h4>
      <p style="font-size:12px;color:var(--muted);margin-bottom:12px;font-style:italic">
        "Hipoteca al 0,49% para menores de 35 años"
      </p>
      <div class="metric"><span>Tráfico</span><span class="val">50%</span></div>
      <div class="metric"><span>Visitantes</span><span class="val">1.051</span></div>
      <div class="metric"><span>Conversiones</span><span class="val" style="color:var(--success)">89</span></div>
      <div class="metric"><span>Tasa conv.</span><span class="val" style="color:var(--success)">8,47%</span></div>
      <div class="metric"><span>Lift vs Control</span><span class="val lift-badge">+56,3%</span></div>
    </div>
  </div>
  <div style="margin-bottom:16px">
    <div style="font-size:12px;font-weight:600;margin-bottom:8px">Comparativa visual</div>
    <div class="bar-compare">
      <div class="bar-a" style="width:39%"></div>
      <div class="bar-b" style="width:61%"></div>
    </div>
    <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--muted)">
      <span>&#9632; Var. A: 5,42%</span>
      <span>&#9632; Var. B: 8,47%</span>
    </div>
  </div>
  <button class="btn-sm primary" style="padding:10px 24px;font-size:13px">
    &#10003; Declarar Variante B como ganadora
  </button>
</div>
</div>`;
}

// =====================================================================
// LEADS
// =====================================================================
function leadsHTML() {
  return `<div class="fade-in">
<div class="section-header">
  <h2>Leads <span class="count-badge">156</span></h2>
  <div style="display:flex;gap:8px">
    <select class="prop-input" style="width:auto;font-size:12px;padding:6px 12px">
      <option>Todas las landings</option>
      <option>Hipoteca Joven</option>
      <option>Tarjeta Platinum</option>
      <option>Black Friday</option>
    </select>
    <button class="btn-sm">&#128229; Exportar CSV</button>
  </div>
</div>
<table class="leads-table">
<thead>
  <tr><th>Nombre</th><th>Email</th><th>Teléfono</th><th>Landing</th><th>Fecha</th><th>Estado</th></tr>
</thead>
<tbody>
  <tr><td><strong>María García López</strong></td><td>maria.garcia@gmail.com</td><td>+34 612 345 678</td><td>Hipoteca Joven</td><td>18 Feb 2026, 10:23</td><td><span class="lead-badge lead-nuevo">Nuevo</span></td></tr>
  <tr><td><strong>Carlos Ruiz Pérez</strong></td><td>c.ruiz@empresa.es</td><td>+34 623 456 789</td><td>Tarjeta Platinum</td><td>18 Feb 2026, 09:45</td><td><span class="lead-badge lead-nuevo">Nuevo</span></td></tr>
  <tr><td><strong>Ana Martínez Díaz</strong></td><td>ana.martinez@hotmail.com</td><td>+34 634 567 890</td><td>Hipoteca Joven</td><td>17 Feb 2026, 18:12</td><td><span class="lead-badge lead-contactado">Contactado</span></td></tr>
  <tr><td><strong>Pedro Sánchez Gil</strong></td><td>p.sanchez@outlook.es</td><td>+34 645 678 901</td><td>Black Friday</td><td>17 Feb 2026, 15:30</td><td><span class="lead-badge lead-cualificado">Cualificado</span></td></tr>
  <tr><td><strong>Laura Fernández Roca</strong></td><td>lfernandez@gmail.com</td><td>+34 656 789 012</td><td>Hipoteca Joven</td><td>17 Feb 2026, 12:08</td><td><span class="lead-badge lead-convertido">Convertido</span></td></tr>
  <tr><td><strong>Javier Moreno Vega</strong></td><td>jmoreno@icloud.com</td><td>+34 667 890 123</td><td>Tarjeta Platinum</td><td>16 Feb 2026, 22:15</td><td><span class="lead-badge lead-contactado">Contactado</span></td></tr>
  <tr><td><strong>Sofía Torres Blanco</strong></td><td>storres@yahoo.es</td><td>+34 678 901 234</td><td>Hipoteca Joven</td><td>16 Feb 2026, 17:42</td><td><span class="lead-badge lead-convertido">Convertido</span></td></tr>
  <tr><td><strong>Miguel Ángel Navarro</strong></td><td>m.navarro@gmail.com</td><td>+34 689 012 345</td><td>Black Friday</td><td>16 Feb 2026, 14:55</td><td><span class="lead-badge lead-nuevo">Nuevo</span></td></tr>
  <tr><td><strong>Elena Romero Soto</strong></td><td>elena.romero@empresa.com</td><td>+34 690 123 456</td><td>Hipoteca Joven</td><td>15 Feb 2026, 11:20</td><td><span class="lead-badge lead-cualificado">Cualificado</span></td></tr>
  <tr><td><strong>David Herrera Castro</strong></td><td>dherrera@proton.me</td><td>+34 601 234 567</td><td>Tarjeta Platinum</td><td>15 Feb 2026, 09:08</td><td><span class="lead-badge lead-contactado">Contactado</span></td></tr>
</tbody>
</table>
</div>`;
}

// =====================================================================
// HEATMAPS
// =====================================================================
function heatmapsHTML() {
  return `<div class="fade-in">
<div class="section-header">
  <h2>Mapas de calor</h2>
  <select class="prop-input" style="width:auto;font-size:12px;padding:6px 12px">
    <option>Hipoteca Joven Meridian</option>
    <option>Tarjeta Platinum</option>
  </select>
</div>
<div class="stat-grid" style="margin-bottom:20px">
  <div class="stat-card" style="padding:16px">
    <div class="label">Visitantes</div>
    <div class="value" style="font-size:22px;color:var(--primary)">2.847</div>
  </div>
  <div class="stat-card" style="padding:16px">
    <div class="label">Clics totales</div>
    <div class="value" style="font-size:22px;color:var(--danger)">4.312</div>
  </div>
  <div class="stat-card" style="padding:16px">
    <div class="label">Scroll medio</div>
    <div class="value" style="font-size:22px;color:var(--success)">67%</div>
  </div>
  <div class="stat-card" style="padding:16px">
    <div class="label">Tiempo medio</div>
    <div class="value" style="font-size:22px;color:var(--accent)">3:24</div>
  </div>
</div>
<div style="display:grid;grid-template-columns:2fr 1fr;gap:16px">
  <div>
    <h3 style="font-size:14px;font-weight:700;margin-bottom:10px">Mapa de clics</h3>
    <div class="heatmap-container" style="height:400px;background:linear-gradient(180deg,#0C2340 0%,#0C2340 15%,#fff 15%,#fff 100%)">
      <div style="text-align:center;padding:12px;color:rgba(255,255,255,.5);font-size:11px">&#127974; Banco Nacional Meridian</div>
      <div style="text-align:center;color:#fff;font-size:14px;font-weight:700;padding:4px">Tu primera vivienda...</div>
      <div class="heatmap-dot" style="width:70px;height:70px;background:radial-gradient(circle,rgba(255,0,0,.8),rgba(255,165,0,.3),transparent);top:85px;left:45%"></div>
      <div class="heatmap-dot" style="width:50px;height:50px;background:radial-gradient(circle,rgba(255,0,0,.6),rgba(255,165,0,.2),transparent);top:45px;left:48%"></div>
      <div class="heatmap-dot" style="width:40px;height:40px;background:radial-gradient(circle,rgba(255,0,0,.5),rgba(255,165,0,.15),transparent);top:160px;left:25%"></div>
      <div class="heatmap-dot" style="width:55px;height:55px;background:radial-gradient(circle,rgba(255,0,0,.7),rgba(255,165,0,.25),transparent);top:200px;left:52%"></div>
      <div class="heatmap-dot" style="width:35px;height:35px;background:radial-gradient(circle,rgba(255,0,0,.4),rgba(255,165,0,.1),transparent);top:280px;left:38%"></div>
      <div class="heatmap-dot" style="width:60px;height:60px;background:radial-gradient(circle,rgba(255,0,0,.7),rgba(255,165,0,.2),transparent);top:320px;left:46%"></div>
    </div>
  </div>
  <div>
    <h3 style="font-size:14px;font-weight:700;margin-bottom:10px">Profundidad de scroll</h3>
    <div class="scroll-depth">
      <div class="scroll-band" style="background:linear-gradient(180deg,#10b981,#10b981 95%,transparent)">95%</div>
      <div class="scroll-band" style="background:linear-gradient(180deg,#3b82f6,#3b82f6 82%,transparent)">82%</div>
      <div class="scroll-band" style="background:linear-gradient(180deg,#f59e0b,#f59e0b 67%,transparent)">67%</div>
      <div class="scroll-band" style="background:linear-gradient(180deg,#ef4444,#ef4444 34%,transparent)">34%</div>
    </div>
    <div class="chart-labels">
      <span>Hero</span><span>Features</span><span>Form</span><span>Footer</span>
    </div>
  </div>
</div>
</div>`;
}

// =====================================================================
// ACCESSIBILITY
// =====================================================================
function a11yHTML() {
  return `<div class="fade-in">
<div class="section-header">
  <h2>Auditoría de accesibilidad</h2>
  <select class="prop-input" style="width:auto;font-size:12px;padding:6px 12px">
    <option>Hipoteca Joven Meridian</option>
  </select>
</div>
<div style="display:grid;grid-template-columns:1fr 2fr;gap:24px">
  <div class="ab-card" style="text-align:center">
    <div class="a11y-score-ring" style="color:var(--success)">92</div>
    <h3 style="font-size:16px;margin-bottom:4px">Puntuación</h3>
    <p style="font-size:13px;color:var(--muted)">WCAG 2.1 AA</p>
    <div style="display:flex;justify-content:center;gap:16px;margin-top:16px;font-size:12px">
      <span style="color:var(--success)">&#10003; 0 errores</span>
      <span style="color:var(--warning)">&#9888; 1 aviso</span>
      <span style="color:var(--primary)">&#8505; 1 info</span>
    </div>
    <button class="btn-sm primary" style="margin-top:16px">Ejecutar auditoría</button>
  </div>
  <div class="ab-card">
    <h3 style="font-size:16px;margin-bottom:16px">Problemas encontrados</h3>
    <div class="a11y-issue">
      <div class="issue-badge" style="background:var(--warning)">!</div>
      <div>
        <div style="font-size:13px;font-weight:600">Contraste insuficiente en enlace del footer</div>
        <div style="font-size:11px;color:var(--muted)">Regla: color-contrast &bull; Sección: Pie de página</div>
        <div class="fix-suggestion">Solución: Cambiar color del enlace a #94a3b8 (ratio 4.7:1)</div>
      </div>
    </div>
    <div class="a11y-issue">
      <div class="issue-badge" style="background:var(--primary)">i</div>
      <div>
        <div style="font-size:13px;font-weight:600">Vídeo sin subtítulos</div>
        <div style="font-size:11px;color:var(--muted)">Regla: video-captions &bull; Sección: Hero</div>
        <div class="fix-suggestion">Solución: Añadir subtítulos o transcripción al vídeo</div>
      </div>
    </div>
    <div style="margin-top:16px;padding-top:16px;border-top:1px solid var(--border)">
      <h4 style="font-size:13px;font-weight:700;margin-bottom:10px;color:var(--success)">&#10003; 4 reglas superadas</h4>
      <div class="passed-rules">
        <span class="check">&#10003;</span> Texto alternativo en imágenes<br>
        <span class="check">&#10003;</span> Jerarquía de encabezados correcta<br>
        <span class="check">&#10003;</span> Etiquetas de formularios presentes<br>
        <span class="check">&#10003;</span> Texto de enlaces descriptivo
      </div>
    </div>
  </div>
</div>
</div>`;
}

// =====================================================================
// SETTINGS
// =====================================================================
function settingsHTML() {
  return `<div class="fade-in">
<div class="ab-card">
  <h3 style="font-size:16px;margin-bottom:20px">Configuración de la empresa</h3>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
    <div class="prop-group">
      <div class="prop-label">Nombre de la empresa</div>
      <input class="prop-input" value="Banco Nacional Meridian">
    </div>
    <div class="prop-group">
      <div class="prop-label">Dominio</div>
      <input class="prop-input" value="meridian.bank">
    </div>
    <div class="prop-group">
      <div class="prop-label">API Key OpenAI (BYOK)</div>
      <input class="prop-input" value="sk-...oculta" type="password">
    </div>
    <div class="prop-group">
      <div class="prop-label">API Key Anthropic (BYOK)</div>
      <input class="prop-input" placeholder="Opcional" type="password">
    </div>
    <div class="prop-group">
      <div class="prop-label">API Key Google Gemini</div>
      <input class="prop-input" placeholder="Opcional" type="password">
    </div>
    <div class="prop-group">
      <div class="prop-label">Stripe Secret Key</div>
      <input class="prop-input" placeholder="sk_live_..." type="password">
    </div>
  </div>
  <div style="display:flex;gap:8px;margin-top:16px">
    <button class="btn-sm primary" onclick="toast('Configuración guardada','Los cambios se aplicaron correctamente')">
      Guardar cambios
    </button>
    <button class="btn-sm">Probar conexión</button>
  </div>
</div>
</div>`;
}

// =====================================================================
// BANK LANDING HTML (reused in editor canvas and preview)
// =====================================================================
function bankLandingHTML(forEditor) {
  function wrap(id, label, content) {
    return forEditor
      ? `<div class="canvas-section" data-section="${id}" data-label="${label}" onclick="selectSection('${id}')">${content}</div>`
      : content;
  }

  return [
    wrap('nav', 'Navegación', `
      <div class="bank-nav">
        <div class="logo">&#127974; Banco Nacional Meridian</div>
        <div class="menu"><span>Hipotecas</span><span>Tarjetas</span><span>Empresas</span><span>Contacto</span></div>
      </div>`),
    wrap('hero', 'Hero', `
      <div class="bank-hero">
        <h1>Tu primera vivienda con la mejor<br>hipoteca del mercado</h1>
        <div class="rate">Desde Euríbor + 0,49% | TIN 2,15%</div>
        <div class="cta-btn">Solicitar ahora &#8594;</div>
        <p style="font-size:11px;margin-top:12px;opacity:.6;position:relative">Sin compromiso. Respuesta en 24h.</p>
      </div>`),
    wrap('stats', 'Estadísticas', `
      <div class="bank-stats">
        <div class="bank-stat"><div class="num">&euro;150M</div><div class="lbl">Financiados</div></div>
        <div class="bank-stat"><div class="num">12.000</div><div class="lbl">Familias</div></div>
        <div class="bank-stat"><div class="num">98%</div><div class="lbl">Aprobación</div></div>
        <div class="bank-stat"><div class="num">24h</div><div class="lbl">Respuesta</div></div>
      </div>`),
    wrap('features', 'Características', `
      <div class="bank-features">
        <h2>Ventajas de nuestra hipoteca</h2>
        <div class="feat-grid">
          <div class="feat-item"><div class="feat-icon">&#128176;</div><h4>Sin comisión apertura</h4><p>0 gastos iniciales</p></div>
          <div class="feat-item"><div class="feat-icon">&#128200;</div><h4>Tipo fijo o variable</h4><p>Tú eliges</p></div>
          <div class="feat-item"><div class="feat-icon">&#128197;</div><h4>Hasta 30 años</h4><p>Cuotas cómodas</p></div>
          <div class="feat-item"><div class="feat-icon">&#127968;</div><h4>100% financiación</h4><p>Para menores de 35</p></div>
        </div>
      </div>`),
    wrap('testimonials', 'Testimonios', `
      <div class="bank-testimonials">
        <h2>Lo que dicen nuestros clientes</h2>
        <div class="test-grid">
          <div class="test-card">
            <blockquote>"El proceso fue rápido y transparente. En 3 semanas teníamos las llaves de nuestra casa."</blockquote>
            <div class="author">María y Pablo García</div>
            <div class="role">Hipoteca Joven, 2025</div>
          </div>
          <div class="test-card">
            <blockquote>"La mejor tasa que encontramos. El asesor nos guió en cada paso del proceso."</blockquote>
            <div class="author">Carlos Ruiz Fernández</div>
            <div class="role">Hipoteca Variable, 2025</div>
          </div>
          <div class="test-card">
            <blockquote>"100% financiación para jóvenes fue clave. Sin Meridian no habríamos podido comprar."</blockquote>
            <div class="author">Ana Torres y Javier Moreno</div>
            <div class="role">Hipoteca Joven, 2026</div>
          </div>
        </div>
      </div>`),
    wrap('faq', 'FAQ', `
      <div class="bank-faq">
        <h2>Preguntas frecuentes</h2>
        <div class="faq-item"><h4>¿Qué documentación necesito?</h4><p>DNI, últimas 3 nóminas, declaración de la renta y contrato de trabajo.</p></div>
        <div class="faq-item"><h4>¿Puedo cambiar de tipo fijo a variable?</h4><p>Sí, ofrecemos la opción de novación sin costes durante los primeros 5 años.</p></div>
        <div class="faq-item"><h4>¿Cuál es el plazo de respuesta?</h4><p>Pre-aprobación en 24h. Aprobación definitiva en 5-7 días laborables.</p></div>
      </div>`),
    wrap('form', 'Formulario', `
      <div class="bank-form">
        <h2>Solicita tu hipoteca</h2>
        <div class="form-fields">
          <input placeholder="Nombre completo">
          <input placeholder="Email" type="email">
          <input placeholder="Teléfono" type="tel">
          <select><option>Tipo de hipoteca</option><option>Fija</option><option>Variable</option><option>Mixta</option></select>
          <input placeholder="Importe deseado (EUR)">
          <button class="submit-btn">Enviar solicitud &#8594;</button>
        </div>
      </div>`),
    wrap('footer', 'Pie de página', `
      <div class="bank-footer">
        <div>&#127974; Banco Nacional Meridian &copy; 2026<br>Entidad supervisada por el Banco de España</div>
        <div style="text-align:right">Aviso legal | Privacidad | Cookies<br>Tel: 900 123 456</div>
      </div>`),
  ].join('');
}

// =====================================================================
// EDITOR
// =====================================================================
function renderEditorCanvas() {
  document.getElementById('editor-canvas-frame').innerHTML = bankLandingHTML(true);
}

const SECTION_PROPS = {
  nav: {
    name: 'Navegación',
    fields: [
      { l: 'Logo texto', v: 'Banco Nacional Meridian' },
      { l: 'Enlace 1', v: 'Hipotecas' },
      { l: 'Enlace 2', v: 'Tarjetas' },
      { l: 'Color fondo', v: '#0C2340', type: 'color' },
    ],
  },
  hero: {
    name: 'Hero — Centrado',
    fields: [
      { l: 'Título', v: 'Tu primera vivienda con la mejor hipoteca del mercado' },
      { l: 'Subtítulo', v: 'Desde Euríbor + 0,49% | TIN 2,15%' },
      { l: 'Texto CTA', v: 'Solicitar ahora' },
      { l: 'URL del CTA', v: '#formulario' },
      { l: 'Color fondo', v: '#0C2340', type: 'color' },
      { l: 'Color CTA', v: '#C5A572', type: 'color' },
    ],
  },
  stats: {
    name: 'Estadísticas',
    fields: [
      { l: 'Stat 1 valor', v: '€150M' },
      { l: 'Stat 1 etiqueta', v: 'Financiados' },
      { l: 'Stat 2 valor', v: '12.000' },
      { l: 'Stat 2 etiqueta', v: 'Familias' },
      { l: 'Stat 3 valor', v: '98%' },
      { l: 'Stat 3 etiqueta', v: 'Aprobación' },
    ],
  },
  features: {
    name: 'Características',
    fields: [
      { l: 'Título sección', v: 'Ventajas de nuestra hipoteca' },
      { l: 'Feature 1', v: 'Sin comisión apertura' },
      { l: 'Feature 2', v: 'Tipo fijo o variable' },
      { l: 'Feature 3', v: 'Hasta 30 años' },
      { l: 'Feature 4', v: '100% financiación' },
    ],
  },
  testimonials: {
    name: 'Testimonios',
    fields: [
      { l: 'Título sección', v: 'Lo que dicen nuestros clientes' },
      { l: 'Testimonio 1 autor', v: 'María y Pablo García' },
      { l: 'Testimonio 1 texto', v: 'El proceso fue rápido y transparente...' },
    ],
  },
  faq: {
    name: 'FAQ',
    fields: [
      { l: 'Título sección', v: 'Preguntas frecuentes' },
      { l: 'Pregunta 1', v: '¿Qué documentación necesito?' },
      { l: 'Respuesta 1', v: 'DNI, últimas 3 nóminas...' },
    ],
  },
  form: {
    name: 'Formulario de contacto',
    fields: [
      { l: 'Título', v: 'Solicita tu hipoteca' },
      { l: 'Texto botón', v: 'Enviar solicitud' },
      { l: 'Color botón', v: '#C5A572', type: 'color' },
      { l: 'Email destino', v: 'leads@meridian.bank' },
    ],
  },
  footer: {
    name: 'Pie de página',
    fields: [
      { l: 'Texto legal', v: 'Banco Nacional Meridian 2026' },
      { l: 'Teléfono', v: '900 123 456' },
      { l: 'Color fondo', v: '#0C2340', type: 'color' },
    ],
  },
};

function selectSection(id) {
  // Update canvas selection
  document.querySelectorAll('.canvas-section').forEach(s => s.classList.remove('selected'));
  const el = document.querySelector(`[data-section="${id}"]`);
  if (el) el.classList.add('selected');

  // Update layer list
  document.querySelectorAll('.layer-item').forEach(li => {
    li.classList.toggle('active-layer', li.textContent.toLowerCase().includes(id.substring(0, 3)));
  });

  // Render properties
  const sp = SECTION_PROPS[id];
  if (!sp) return;
  document.getElementById('props-name').textContent = sp.name;

  const html = sp.fields.map(f => {
    if (f.type === 'color') {
      return `<div class="prop-group">
        <div class="prop-label">${f.l}</div>
        <div class="prop-color">
          <input type="color" value="${f.v}">
          <input class="prop-input" value="${f.v}" style="flex:1">
        </div>
      </div>`;
    }
    return `<div class="prop-group">
      <div class="prop-label">${f.l}</div>
      <input class="prop-input" value="${f.v}">
    </div>`;
  }).join('');

  document.getElementById('props-content').innerHTML = html;
}

// =====================================================================
// PREVIEW
// =====================================================================
function renderPreview() {
  document.getElementById('preview-content').innerHTML = bankLandingHTML(false);
  document.getElementById('preview-popup').classList.remove('show');
}

// =====================================================================
// INIT
// =====================================================================
renderEditorCanvas();
renderPreview();
</script>
</body>
</html>
